options {
    directory "/var/cache/bind";

    // Listen on all interfaces
    listen-on { any; };
    listen-on-v6 { any; };

    // Allow queries from any source (adjust as needed)
    allow-query { any; };

    // Enable recursion for resolver functionality
    recursion yes;
    allow-recursion { any; };

    // NO forwarders - we want full recursive resolution
    // BIND will query root servers and follow delegation chain

    // DNSSEC validation
    dnssec-validation auto;

    // Cache control - aggressive minimal caching
    max-cache-ttl 30;        // Cap positive cache at 30 seconds
    max-ncache-ttl 1;        // Cap negative cache at 1 second
    min-cache-ttl 0;         // Don't extend short TTLs
    min-ncache-ttl 0;        // Don't extend short negative TTLs

    // Logging
    querylog yes;

    // Performance tuning
    max-cache-size 512M;

    // Security settings
    version "not disclosed";
    hostname "not disclosed";

    // Disable notify for resolver mode
    notify no;

    // Rate limiting
    rate-limit {
        responses-per-second 10;
        window 5;
    };
};

// Logging configuration
logging {
    channel default_log {
        file "/var/log/bind/named.log" versions 3 size 10M;
        severity info;
        print-time yes;
        print-severity yes;
        print-category yes;
    };

    category default { default_log; };
    category queries { default_log; };
    category resolver { default_log; };
};

// Root hints (standard)
zone "." {
    type hint;
    file "/usr/share/dns/root.hints";
};

// Localhost zones
zone "localhost" {
    type master;
    file "/etc/bind/db.local";
};

zone "127.in-addr.arpa" {
    type master;
    file "/etc/bind/db.127";
};

zone "0.in-addr.arpa" {
    type master;
    file "/etc/bind/db.0";
};

zone "255.in-addr.arpa" {
    type master;
    file "/etc/bind/db.255";
};